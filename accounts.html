<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accounts - BudgetFlow</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/accounts.css">
    <link rel="stylesheet" href="css/settingsModal.css">
</head>
<body>
    <body>
    <main class="container">
        <div class="header">
            <h1>Accounts</h1>
            <button class="btn-add-account" id="showAddAccountModalBtn">
                <i data-lucide="plus"></i>
                <span>Add Account</span>
            </button>
        </div>

        <!-- Summary Cards -->
        <div class="summary-grid">
            <div class="card summary-card assets">
                <div class="card-header">
                    <div class="card-icon assets">
                        <i data-lucide="trending-up"></i>
                    </div>
                    <h3>Total Assets</h3>
                </div>
                <div class="card-body">
                    <p class="summary-value" id="totalAssets">$0.00</p>
                </div>
            </div>

            <div class="card summary-card debts">
                <div class="card-header">
                    <div class="card-icon debts">
                        <i data-lucide="trending-down"></i>
                    </div>
                    <h3>Total Debts</h3>
                </div>
                <div class="card-body">
                    <p class="summary-value" id="totalDebts">$0.00</p>
                </div>
            </div>

            <div class="card summary-card net-worth">
                <div class="card-header">
                    <div class="card-icon net-worth">
                        <i data-lucide="dollar-sign"></i>
                    </div>
                    <h3>Net Worth</h3>
                </div>
                <div class="card-body">
                    <p class="summary-value" id="netWorth">$0.00</p>
                </div>
            </div>
        </div>

        <!-- Accounts List -->
        <div class="accounts-section">
            <div class="accounts-header">
                <div class="section-icon">
                    <i data-lucide="wallet"></i>
                </div>
                <h3>Your Accounts</h3>
            </div>
            <div class="accounts-list" id="accountsList">
                <!-- Account items will be added here -->
            </div>
            <div class="empty-state" id="emptyState">
                <i data-lucide="wallet"></i>
                <p>No accounts yet</p>
                <span>Click "Add Account" to create your first account</span>
            </div>
        </div>
    </main>

    <!-- Account Modal -->
    <div class="modal-overlay" id="accountModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="modalTitle">Add Account</h2>
                <button class="modal-close" id="closeAccountModalBtn">×</button>
            </div>
            <div class="modal-body">
                <form id="accountForm">
                    <input type="hidden" id="accountId">
                    
                    <div class="form-group">
                        <label for="accountName">
                            <i data-lucide="tag"></i>
                            Account Name
                        </label>
                        <input type="text" id="accountName" placeholder="e.g., Chase Checking" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="accountBalance">
                            <i data-lucide="dollar-sign"></i>
                            Current Balance
                        </label>
                        <div class="input-with-icon">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="accountBalance" step="0.01" placeholder="0.00" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="accountType">
                            <i data-lucide="layers"></i>
                            Account Type
                        </label>
                        <select id="accountType" required>
                            <option value="">Select Type</option>
                            <option value="asset">Asset (Checking, Savings, Cash)</option>
                            <option value="debt">Debt (Credit Card, Loan)</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-primary" id="saveAccountBtn">
                            <i data-lucide="check"></i>
                            Save Account
                        </button>
                        <button type="button" class="btn-danger" id="deleteAccountBtn" style="display: none;">
                            <i data-lucide="trash-2"></i>
                            Delete Account
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

<!-- Transaction Edit Modal -->
    <div class="modal-overlay" id="transactionModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="transactionModalTitle">Edit Transaction</h2>
                <button class="modal-close" id="closeTransactionModalBtn">×</button>
            </div>
            <div class="modal-body">
                <form id="transactionForm">
                    <input type="hidden" id="transactionId">
                    <input type="hidden" id="transactionMonthKey">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="transactionDay">
                                <i data-lucide="calendar"></i>
                                Date
                            </label>
                            <input type="date" id="transactionDay" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="transactionType">
                                <i data-lucide="arrow-right-left"></i>
                                Type
                            </label>
                            <select id="transactionType" required>
                                <option value="expense">Expense</option>
                                <option value="income">Income</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="transactionMerchant">
                            <i data-lucide="store"></i>
                            Merchant/Description
                        </label>
                        <input type="text" id="transactionMerchant" placeholder="e.g., Starbucks" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="transactionAmount">
                            <i data-lucide="dollar-sign"></i>
                            Amount
                        </label>
                        <div class="input-with-icon">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="transactionAmount" step="0.01" placeholder="0.00" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="transactionCategory">
                            <i data-lucide="tag"></i>
                            Category
                        </label>
                        <select id="transactionCategory">
                            <option value="">Uncategorized</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="transactionAccount">
                            <i data-lucide="wallet"></i>
                            Account
                        </label>
                        <select id="transactionAccount" required>
                            <option value="">Select Account</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="transactionRecurring">
                            <span>Recurring Transaction</span>
                        </label>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-primary" id="saveTransactionBtn">
                            <i data-lucide="check"></i>
                            Save Transaction
                        </button>
                        <button type="button" class="btn-danger" id="deleteTransactionBtn">
                            <i data-lucide="trash-2"></i>
                            Delete
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="js/supabaseClient.js"></script>
    <script src="js/navbar.js"></script>
    <script src="js/settingsModal.js"></script>
    <script src="js/accounts.js"></script>
</body>
</html>